<!DOCTYPE html>
<html>
<head>
  <title>Community Land Dashboard</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 600px;
      width: 100%;
    }
  </style>
</head>
<body>

<h2>Community Land Dashboard</h2>
<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Coordinates for communities
  const communityCoordinates = {
    "Lorengippi": [3.0, 35.5],
    "Turkana West": [3.2, 35.7],
    "Lokicha": [3.1, 35.6],
    "Leheley": [1.7, 39.5],
    "Diff": [1.8, 39.6],
    "Sabuli": [1.9, 39.7],
    "Obittu": [2.3, 37.9],
    "Walda": [2.4, 38.0],
    "Lokitonyila": [3.3167, 35.5667], // âœ… Updated coordinates
    "Kasei": [1.3, 35.1],
    "Alale": [2.3439, 34.9274], // âœ… In Progress â†’ Orange
    "Charri": [0.5, 37.6],
    "Cherab": [0.6, 37.7],
    "Kinna": [0.7, 37.8],
    "West Pokot Central": [1.2, 35.0],
    "West Pokot East": [1.3, 35.1]
  };

  // Status mapping for communities
  const communityStatus = {
    "Alale": "In Progress", // ðŸŸ  Orange
    "Lorengippi": "Pending",
    "Turkana West": "Pending",
    "Lokicha": "Pending",
    "Leheley": "Pending",
    "Diff": "Pending",
    "Sabuli": "Pending",
    "Obittu": "Pending",
    "Walda": "Pending",
    "Lokitonyila": "Pending",
    "Kasei": "Pending",
    "Charri": "Pending",
    "Cherab": "Pending",
    "Kinna": "Pending",
    "West Pokot Central": "Pending",
    "West Pokot East": "Pending"
  };

  // Function to get color based on status
  function getColor(status) {
    switch(status) {
      case "Completed": return "green";
      case "In Progress": return "orange";
      default: return "red";
    }
  }

  // Initialize the map
  const map = L.map('map').setView([2.0, 37.0], 6);

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  // Add markers with color coding
  Object.keys(communityCoordinates).forEach(name => {
    const coords = communityCoordinates[name];
    const status = communityStatus[name] || "Pending";
    const color = getColor(status);

    const icon = L.icon({
      iconUrl: `https://chart.googleapis.com/chart?chst=d_map_pin_icon&chld=home|${color}`,
      iconSize: [30, 50],
      iconAnchor: [15, 50],
      popupAnchor: [0, -45]
    });

    L.marker(coords, { icon: icon })
      .addTo(map)
      .bindPopup(`<b>${name}</b><br>Status: ${status}`);
  });
</script>

</body>
</html>
